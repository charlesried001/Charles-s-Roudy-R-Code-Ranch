dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ AGE, pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted2 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic = 0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted2$yhat <- predict(model2, newdata = to_be_predicted2)
lines(yhat ~ AGE, data = to_be_predicted2)
detach()
suppressMessages(attach(dat_use))
model3 <- lm(INCWAGE ~ log(AGE) + I(log(AGE^2)) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model3)
suppressMessages(require(stargazer))
stargazer(model3, type = "text")
detach()
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted3 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic =0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted3$yhat <- predict(model3, newdata = to_be_predicted3)
lines(yhat ~ AGE, data = to_be_predicted3)
linearHypothesis(model2, "I(AGE^3) + I(AGE^4) + I(AGE^5) = 0", test="F")
knitr::opts_chunk$set(echo = FALSE)
library(stargazer)
library(dplyr)
library(car)
load("acs2017_ny_data.RData")
suppressMessages(attach(acs2017_ny))
use_varb <- (AGE >= 25) & (AGE <= 65) & (LABFORCE == 2) & (WKSWORK2 > 4) & (UHRSWORK >= 35) & (female == 1)
dat_use <- subset(acs2017_ny,use_varb)
detach()
suppressMessages(attach(dat_use))
model1 <- lm(INCWAGE ~ AGE + + I(AGE^2) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model1)
suppressMessages(require(stargazer))
stargazer(model1, type = "text")
detach()
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.5)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ AGE, pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted1 <- data.frame(AGE = 25:65, female = 1,white = 1, Hispanic = 0, AfAm =0, educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted1$yhat <- predict(model1, newdata = to_be_predicted1)
lines(yhat ~ AGE, data = to_be_predicted1)
initmax <- max(to_be_predicted1$yhat)
suppressMessages(attach(dat_use))
model2 <- lm(INCWAGE ~ AGE + I(AGE^2)+ I(AGE^3)+ I(AGE^4)+ I(AGE^5) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model2)
suppressMessages(require(stargazer))
stargazer(model2, type = "text")
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ AGE, pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted2 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic = 0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted2$yhat <- predict(model2, newdata = to_be_predicted2)
lines(yhat ~ AGE, data = to_be_predicted2)
detach()
suppressMessages(attach(dat_use))
model3 <- lm(INCWAGE ~ log(AGE) + I(log(AGE^2)) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model3)
suppressMessages(require(stargazer))
stargazer(model3, type = "text")
detach()
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted3 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic =0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted3$yhat <- predict(model3, newdata = to_be_predicted3)
lines(yhat ~ AGE, data = to_be_predicted3)
linearHypothesis(model2, "I(AGE^3) + I(AGE^4) + I(AGE^5) = 0", test="F")
suppressMessages(attach(dat_use))
model4 <- lm(INCWAGE ~ AGE + I(AGE^2) + I(AGE^3) + I(AGE^4) +I(AGE^5) + I(AGE^6) + educ_hs + educ_college+ educ_advdeg + white + AfAm + Hispanic)
summary(model4)
suppressMessages(require(stargazer))
stargazer(model4, type = "text")
detach()
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted4 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic =0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted4$yhat <- predict(model4, newdata = to_be_predicted4)
lines(yhat ~ AGE, data = to_be_predicted4)
suppressMessages(attach(dat_use))
model5 <- lm(log1p(INCWAGE) ~ AGE + I(AGE^2) + I(AGE^3) + I(AGE^4) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model5)
suppressMessages(require(stargazer))
stargazer(model5, type = "text")
detach()
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model5, newdata = to_be_predicted5)
lines(yhat ~ AGE, data = to_be_predicted5)
suppressMessages(require(stargazer))
stargazer(model1, model2, model3, model4, model5, type = "text")
suppressMessages(attach(dat_use))
model6 <- lm(log1p(INCWAGE) ~ AGE + I(AGE^2)+ educ_hs * educ_college * educ_advdeg + white + AfAm + Hispanic)
summary(model6)
suppressMessages(require(stargazer))
stargazer(model6, type = "text")
detach()
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model6, newdata = to_be_predicted5)
lines(yhat ~ AGE, data = to_be_predicted5)
suppressMessages(attach(dat_use))
model6 <- lm(log1p(INCWAGE) ~ AGE + I(AGE^2)+ educ_hs * educ_college * educ_advdeg + white + AfAm + Hispanic)
summary(model6)
suppressMessages(require(stargazer))
stargazer(model6, type = "text")
detach()
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model6, newdata = to_be_predicted5)
lines(yhat ~ AGE, data = to_be_predicted5)
view(acs2017_ny)
View(acs2017_ny)
suppressMessages(attach(dat_use))
model6 <- lm(log1p(INCWAGE) ~ female )
summary(model6)
suppressMessages(require(stargazer))
stargazer(model6, type = "text")
detach()
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model6, newdata = to_be_predicted5)
lines(yhat ~ AGE, data = to_be_predicted5)
suppressMessages(attach(dat_use))
model6 <- lm(log1p(INCWAGE) ~ female * EDUC * AGE)
summary(model6)
suppressMessages(require(stargazer))
stargazer(model6, type = "text")
detach()
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model6, newdata = to_be_predicted5)
suppressMessages(attach(dat_use))
model6 <- lm(log1p(INCWAGE) ~ female * AGE)
summary(model6)
suppressMessages(require(stargazer))
stargazer(model6, type = "text")
detach()
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model6, newdata = to_be_predicted5)
lines(yhat ~ AGE, data = to_be_predicted5)
suppressMessages(attach(dat_use))
model6 <- lm(log1p(INCWAGE) ~ + white * AfAm * Hispanic)
summary(model6)
suppressMessages(require(stargazer))
stargazer(model6, type = "text")
detach()
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model6, newdata = to_be_predicted5)
lines(yhat ~ AGE, data = to_be_predicted5)
knitr::opts_chunk$set(echo = TRUE)
attach(acs2017_ny)
use_varb <- (AGE >= 25) & (AGE <= 55) & (LABFORCE == 2) & (WKSWORK2 > 4) & (UHRSWORK >= 35)
dat_use <- subset(acs2017_ny,use_varb) #
detach()
attach(dat_use)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(stats)
library(stargazer)
library(AER)
library(survival)
library(sandwich)
library(np)
load("acs2017_ny_data.RData")
attach(acs2017_ny)
use_varb <- (AGE >= 25) & (AGE <= 55) & (LABFORCE == 2) & (WKSWORK2 > 4) & (UHRSWORK >= 35)
dat_use <- subset(acs2017_ny,use_varb) #
detach()
attach(dat_use)
model_temp1 <- lm(INCWAGE ~ AGE + female + AfAm + Asian + Amindian + race_oth + Hispanic + educ_hs + educ_somecoll + educ_college + educ_advdeg)
summary(model_temp1)
# maybe get fancy
require(stargazer)
stargazer(model_temp1, type = "text")
# play with stargazer instead of summary, it can look nicer!
require(AER)
# subset in order to plot...
NNobs <- length(INCWAGE)
set.seed(12345) # just so you can replicate and get same "random" choices
graph_obs <- (runif(NNobs) < 0.1) # so something like just 1/10 as many obs
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ jitter(AGE, factor = 2), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), data = dat_graph)
# ^^ that looks like crap since Wages are soooooooo skew!  So try to find some sensible ylim = c(0, ??)
plot(INCWAGE ~ jitter(AGE, factor = 2), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
# discus what you see in this plot
# change this line to fit your regression
to_be_predicted2 <- data.frame(AGE = 25:55, female = 1, AfAm = 0, Asian = 0, Amindian = 1, race_oth = 1, Hispanic = 1, educ_hs = 0, educ_somecoll = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted2$yhat <- predict(model_temp1, newdata = to_be_predicted2)
lines(yhat ~ AGE, data = to_be_predicted2)
ggplot(to_be_predicted2, aes(x=AGE, y=yhat, color=factor(female)))+
geom_point()+geom_smooth(method = "lm")+labs(color='female') + ggtitle("Plot of Female Wages on Age")+  xlab("Age") + ylab("Wage") + scale_y_continuous(limits=c(0,100000))
model_temp2 <- lm(log1p(INCWAGE) ~ AGE + female + AfAm + Asian + Amindian + race_oth + Hispanic + educ_hs + educ_somecoll + educ_college + educ_advdeg)
model_temp3 <- lm(INCWAGE ~ AGE + female + AfAm + Asian + Amindian + race_oth + Hispanic + educ_hs + educ_somecoll + educ_college + educ_advdeg)
stargazer(model_temp2, model_temp3, type = "text")
detach()
library(stargazer)
library(dplyr)
library(car)
setwd("C:\Users\Charlie\Desktop\R Homework\Homework-5-Econometrics-main")
library(stargazer)
library(dplyr)
library(car)
setwd("C:\Users\Charlie\Desktop\R Homework\Homework-5-Econometrics-main")
setwd("C:/Users/Charlie/Desktop/R Homework/Homework-5-Econometrics-main")
load("acs2017_ny_data")
setwd("C:/Users/Charlie/Desktop/R Homework/Homework-5-Econometrics-main")
library(stargazer)
library(dplyr)
library(car)
setwd("C:/Users/Charlie/Desktop/R Homework/Homework-5-Econometrics-main")
load("C:/Users/Charlie/Desktop/R Homework/Homework-5-Econometrics-main/acs2017_ny_data")
setwd("C:/Users/Charlie/Desktop/R Homework/Homework-5-Econometrics-main")
load("C:/Users/Charlie/Desktop/R Homework/Homework-5-Econometrics-main/acs2017_ny_data")
load("acs2017_ny_data.RData")
suppressMessages(attach(acs2017_ny))
use_varb <- (AGE >= 25) & (AGE <= 65) & (LABFORCE == 2) & (WKSWORK2 > 4) & (UHRSWORK >= 35) & (female == 1)
dat_use <- subset(acs2017_ny,use_varb)
detach()
suppressMessages(attach(dat_use))
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.5)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ AGE, pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted1 <- data.frame(AGE = 25:65, female = 1,white = 1, Hispanic = 0, AfAm =0, educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted1$yhat <- predict(model1, newdata = to_be_predicted1)
lines(yhat ~ AGE, data = to_be_predicted1)
initmax <- max(to_be_predicted1$yhat)
detach()
suppressMessages(attach(dat_use))
model2 <- lm(INCWAGE ~ AGE + I(AGE^2)+ I(AGE^3)+ I(AGE^4)+ I(AGE^5) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model2)
suppressMessages(require(stargazer))
stargazer(model2, type = "text")
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ AGE, pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted2 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic = 0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted2$yhat <- predict(model2, newdata = to_be_predicted2)
lines(yhat ~ AGE, data = to_be_predicted2)
detach()
library(stargazer)
library(dplyr)
library(car)
load("acs2017_ny_data.RData")
suppressMessages(attach(acs2017_ny))
use_varb <- (AGE >= 25) & (AGE <= 65) & (LABFORCE == 2) & (WKSWORK2 > 4) & (UHRSWORK >= 35) & (female == 1)
dat_use <- subset(acs2017_ny,use_varb)
detach()
suppressMessages(attach(dat_use))
model1 <- lm(INCWAGE ~ AGE + I(AGE^2) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model1)
suppressMessages(require(stargazer))
stargazer(model1, type = "text")
detach()
suppressMessages(attach(dat_use))
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.5)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ AGE, pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted1 <- data.frame(AGE = 25:65, female = 1,white = 1, Hispanic = 0, AfAm =0, educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted1$yhat <- predict(model1, newdata = to_be_predicted1)
lines(yhat ~ AGE, data = to_be_predicted1)
initmax <- max(to_be_predicted1$yhat)
detach()
suppressMessages(attach(dat_use))
model2 <- lm(INCWAGE ~ AGE + I(AGE^2)+ I(AGE^3)+ I(AGE^4)+ I(AGE^5) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model2)
suppressMessages(require(stargazer))
stargazer(model2, type = "text")
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ AGE, pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted2 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic = 0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted2$yhat <- predict(model2, newdata = to_be_predicted2)
lines(yhat ~ AGE, data = to_be_predicted2)
detach()
suppressMessages(attach(dat_use))
model3 <- lm(INCWAGE ~ log(AGE) + I(log(AGE^2)) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model3)
suppressMessages(require(stargazer))
stargazer(model3, type = "text")
detach()
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted3 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic =0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted3$yhat <- predict(model3, newdata = to_be_predicted3)
lines(yhat ~ AGE, data = to_be_predicted3)
linearHypothesis(model2, "I(AGE^3) + I(AGE^4) + I(AGE^5) = 0", test="F")
suppressMessages(attach(dat_use))
model4 <- lm(INCWAGE ~ AGE + I(AGE^2) + I(AGE^3) + I(AGE^4) +I(AGE^5) + I(AGE^6) + educ_hs + educ_college+ educ_advdeg + white + AfAm + Hispanic)
summary(model4)
suppressMessages(require(stargazer))
stargazer(model4, type = "text")
detach()
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted4 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic =0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted4$yhat <- predict(model4, newdata = to_be_predicted4)
lines(yhat ~ AGE, data = to_be_predicted4)
suppressMessages(attach(dat_use))
model5 <- lm(log1p(INCWAGE) ~ AGE + I(AGE^2) + I(AGE^3) + I(AGE^4) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model5)
suppressMessages(require(stargazer))
stargazer(model5, type = "text")
detach()
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model5, newdata = to_be_predicted5)
lines(yhat ~ AGE, data = to_be_predicted5)
suppressMessages(require(stargazer))
stargazer(model1, model2, model3, model4, model5, type = "text")
suppressMessages(attach(dat_use))
model6 <- lm(log1p(INCWAGE) ~ + white * AfAm * Hispanic)
summary(model6)
suppressMessages(require(stargazer))
stargazer(model6, type = "text")
detach()
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model6, newdata = to_be_predicted5)
lines(yhat ~ AGE, data = to_be_predicted5)
suppressMessages(attach(dat_use))
model3 <- lm(INCWAGE ~ log(AGE) + I(log(AGE^2)) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model3)
suppressMessages(require(stargazer))
stargazer(model3, type = "text")
detach()
suppressMessages(attach(dat_use))
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted3 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic =0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted3$yhat <- predict(model3, newdata = to_be_predicted3)
lines(yhat ~ AGE, data = to_be_predicted3)
detach()
suppressMessages(attach(dat_use))
model4 <- lm(INCWAGE ~ AGE + I(AGE^2) + I(AGE^3) + I(AGE^4) +I(AGE^5) + I(AGE^6) + educ_hs + educ_college+ educ_advdeg + white + AfAm + Hispanic)
summary(model4)
suppressMessages(require(stargazer))
stargazer(model4, type = "text")
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted4 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic =0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted4$yhat <- predict(model4, newdata = to_be_predicted4)
lines(yhat ~ AGE, data = to_be_predicted4)
detach()
library(stargazer)
library(dplyr)
library(car)
load("acs2017_ny_data.RData")
suppressMessages(attach(acs2017_ny))
use_varb <- (AGE >= 25) & (AGE <= 65) & (LABFORCE == 2) & (WKSWORK2 > 4) & (UHRSWORK >= 35) & (female == 1)
dat_use <- subset(acs2017_ny,use_varb)
detach()
suppressMessages(attach(dat_use))
model1 <- lm(INCWAGE ~ AGE + I(AGE^2) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model1)
suppressMessages(require(stargazer))
stargazer(model1, type = "text")
detach()
suppressMessages(attach(dat_use))
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.5)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ AGE, pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted1 <- data.frame(AGE = 25:65, female = 1,white = 1, Hispanic = 0, AfAm =0, educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted1$yhat <- predict(model1, newdata = to_be_predicted1)
lines(yhat ~ AGE, data = to_be_predicted1)
initmax <- max(to_be_predicted1$yhat)
detach()
suppressMessages(attach(dat_use))
model2 <- lm(INCWAGE ~ AGE + I(AGE^2)+ I(AGE^3)+ I(AGE^4)+ I(AGE^5) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model2)
suppressMessages(require(stargazer))
stargazer(model2, type = "text")
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ AGE, pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted2 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic = 0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted2$yhat <- predict(model2, newdata = to_be_predicted2)
lines(yhat ~ AGE, data = to_be_predicted2)
detach()
suppressMessages(attach(dat_use))
model3 <- lm(INCWAGE ~ log(AGE) + I(log(AGE^2)) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model3)
suppressMessages(require(stargazer))
stargazer(model3, type = "text")
detach()
suppressMessages(attach(dat_use))
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted3 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic =0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted3$yhat <- predict(model3, newdata = to_be_predicted3)
lines(yhat ~ AGE, data = to_be_predicted3)
detach()
linearHypothesis(model2, "I(AGE^3) + I(AGE^4) + I(AGE^5) = 0", test="F")
suppressMessages(attach(dat_use))
model4 <- lm(INCWAGE ~ AGE + I(AGE^2) + I(AGE^3) + I(AGE^4) +I(AGE^5) + I(AGE^6) + educ_hs + educ_college+ educ_advdeg + white + AfAm + Hispanic)
summary(model4)
suppressMessages(require(stargazer))
stargazer(model4, type = "text")
NNobs <- length(INCWAGE)
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(INCWAGE ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150000), data = dat_graph)
to_be_predicted4 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic =0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted4$yhat <- predict(model4, newdata = to_be_predicted4)
lines(yhat ~ AGE, data = to_be_predicted4)
detach()
suppressMessages(attach(dat_use))
model5 <- lm(log1p(INCWAGE) ~ AGE + I(AGE^2) + I(AGE^3) + I(AGE^4) + educ_hs + educ_college + educ_advdeg + white + AfAm + Hispanic)
summary(model5)
suppressMessages(require(stargazer))
stargazer(model5, type = "text")
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model5, newdata = to_be_predicted5)
lines(yhat ~ AGE, data = to_be_predicted5)
detach()
suppressMessages(require(stargazer))
stargazer(model1, model2, model3, model4, model5, type = "text")
suppressMessages(attach(dat_use))
model6 <- lm(log1p(INCWAGE) ~ + white * AfAm * Hispanic)
summary(model6)
suppressMessages(require(stargazer))
stargazer(model6, type = "text")
NNobs <- length(log1p(INCWAGE))
set.seed(12345)
graph_obs <- (runif(NNobs) < 0.1)
dat_graph <-subset(dat_use,graph_obs)
plot(log1p(INCWAGE) ~ (AGE), pch = 16, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(10,11), data = dat_graph)
to_be_predicted5 <- data.frame(AGE = 25:65, female = 1, white = 1, Hispanic=0, AfAm = 0,educ_hs = 0, educ_college = 1, educ_advdeg = 0)
to_be_predicted5$yhat <- predict(model6, newdata = to_be_predicted5)
lines(yhat ~ AGE, data = to_be_predicted5)
detach()
